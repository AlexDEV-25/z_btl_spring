<app-layout [menuItems]="menuItems" [userName]="userName" [userRole]="'Sinh viÃªn'">
    <div class="main-card">
        <div class="page-header">
            <h3>ğŸ“š ÄÄƒng kÃ½ mÃ´n há»c</h3>
        </div>

        <div class="card-body">
            <!-- Loading State -->
            <div *ngIf="loading" class="loading-message">
                â³ Äang táº£i dá»¯ liá»‡u...
            </div>

            <!-- Error Message -->
            <div *ngIf="error" class="error-message">
                âš ï¸ {{ error }}
            </div>

            <!-- Success Message -->
            <div *ngIf="successMessage" class="success-message">
                âœ… {{ successMessage }}
            </div>

            <!-- Available Courses -->
            <div *ngIf="!loading && availableCourses.length > 0">
                <h4 style="margin-bottom: 1rem; color: var(--primary-color);">ğŸ“‹ MÃ´n há»c cÃ³ thá»ƒ Ä‘Äƒng kÃ½</h4>
                <div class="course-grid">
                    <div *ngFor="let course of availableCourses" class="course-card">
                        <div class="course-header">
                            <div class="course-info">
                                <h3>{{ course.courseCode }}</h3>
                                <p class="course-name">{{ course.courseName }}</p>
                            </div>
                            <div class="course-credit">
                                <span class="credit-badge">{{ course.credit }} TC</span>
                                <div *ngIf="course.semester" class="semester-info">
                                    <span class="semester-badge">ğŸ“… {{ course.semester }}</span>
                                </div>
                            </div>
                        </div>

                        <div class="course-details">
                            <div class="detail-item" *ngIf="course.lecturerName">
                                <span class="label">ğŸ‘¨â€ğŸ« Giáº£ng viÃªn:</span>
                                <span class="value">{{ course.lecturerName }}</span>
                            </div>
                            <div class="detail-item" *ngIf="course.period && course.dayOfWeek">
                                <span class="label">ğŸ“… Thá»i gian:</span>
                                <span class="value">{{ course.dayOfWeek }}, tiáº¿t {{ course.period }}</span>
                            </div>
                            <div class="detail-item" *ngIf="course.classroom">
                                <span class="label">ğŸ« PhÃ²ng há»c:</span>
                                <span class="value">{{ course.classroom }}</span>
                            </div>
                            <div class="detail-item"
                                *ngIf="course.availableSlots !== undefined && course.maxSlots !== undefined">
                                <span class="label">ğŸ‘¥ Slot:</span>
                                <span class="value">{{ course.availableSlots }}/{{ course.maxSlots }}</span>
                            </div>
                        </div>

                        <div class="course-status">
                            <div *ngIf="course.canRegister" class="status-available">
                                âœ… CÃ³ thá»ƒ Ä‘Äƒng kÃ½
                            </div>
                            <div *ngIf="!course.canRegister" class="status-unavailable">
                                âŒ {{ course.reason || 'KhÃ´ng thá»ƒ Ä‘Äƒng kÃ½' }}
                            </div>
                        </div>

                        <div class="course-actions">
                            <button *ngIf="course.canRegister" class="btn btn-primary" [disabled]="processing"
                                (click)="registerCourse(course.courseId)">
                                {{ processing ? 'â³ Äang xá»­ lÃ½...' : 'â• ÄÄƒng kÃ½' }}
                            </button>
                            <button *ngIf="course.canUnregister" class="btn btn-danger" [disabled]="processing"
                                (click)="confirmUnregister(course)">
                                {{ processing ? 'â³ Äang xá»­ lÃ½...' : 'âŒ Há»§y Ä‘Äƒng kÃ½' }}
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- No Data Message -->
            <div *ngIf="!loading && availableCourses.length === 0" class="no-data">
                ğŸ“­ KhÃ´ng cÃ³ mÃ´n há»c nÃ o cÃ³ thá»ƒ Ä‘Äƒng kÃ½
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions">
                <button class="btn btn-secondary" (click)="goToSchedule()">
                    ğŸ“… Xem thá»i khÃ³a biá»ƒu
                </button>
                <button class="btn btn-secondary" (click)="goToGrades()">
                    ğŸ“Š Xem báº£ng Ä‘iá»ƒm
                </button>
            </div>
        </div>
    </div>
</app-layout>